<section class="featured-posts pb-4">

  <h3 class="text-center display-5 mb-5">Highlights</h3>

  {%- assign postFeat = site.posts | where: 'featured-post', 'true' -%}
  {%- assign caseFeat = site.casestudies | where: 'featured-post', 'true' -%}
  {%- assign featured = postFeat | concat: caseFeat -%}

  <div class="row g-5">
    {% for post in featured limit:3 %}
    <div class="col-4">
      <article class="featured-post entry">
        <a class="text-decoration-none d-block" href="{%- if postFeat -%}{{ post.url }}{%- elsif caseFeat -%}{{ casestudy.url }}{%- endif -%}">
          <img class="img-fluid" loading="lazy" src="{{ site.url }}/assets/images/highlights/highlighted-{%- if postFeat -%}{{ post.featured-image }}{%- elsif caseFeat -%}{{ casestudy.featured-image }}{%- endif -%}" alt="{%- if postFeat -%}{{ post.title }}{%- elsif caseFeat -%}{{ casestudy.title }}{%- endif -%}" width="300" height="169">
          <h4 class="my-3">
            {%- if postFeat -%}{{ post.title }}{%- elsif caseFeat -%}{{ casestudy.title }}{%- endif -%}
          </h4>
        </a>
        <div class="post-meta mb-3">
          {%- include post-meta.html -%}
        </div>
        <p class="featured-post-excerpt">{%- if postFeat -%}{{ post.excerpt | markdownify | strip_html }}{%- elsif caseFeat -%}{{ casestudy.excerpt | markdownify | strip_html }}{%- endif -%}</p>
        <div class="mt-3">
          <a class="bi bi-chevron-right" href="{{ post.url }}" title="Read the entire post">Read {% if post.url contains '/portfolio/' -%}the case study{% else -%}the post{%- endif -%}</a> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg>
        </div>
      </article>
    </div>
    {% endfor %}
  </div>

</section>