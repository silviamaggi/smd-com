// ------------------------------------------------ \\
// $CUSTOM THEME
//
// * Custom components
// * Custom utility classes
// * Imported in `smd.scss`
// ------------------------------------------------ //


// ------------------------------------------------ \\
// $GENERAL
// ------------------------------------------------ //
html {
  border: 1rem solid $white;
}
body {
  background: $background-l-80 url('/assets/images/smd-bg-texture.jpg') no-repeat bottom left;
  background-size: 100% auto;
  min-height: calc(100vh - 2rem);
  display: flex;
  flex-direction: column;
}
main {
  flex: 1 0 auto;
}


// ------------------------------------------------ \\
// $SPACING
// ------------------------------------------------ //

.ms-n5 {
  margin-left: rfs-fluid-value(-120px);
}


// ------------------------------------------------ \\
// $HEADINGS
// ------------------------------------------------ //

h1 {
  @extend #{$site-prefix}-mask-texture;
}

// Search page result heading (component)
h4 {
  .list-result & {
    @extend .h2;
    margin-bottom: $spacer;
  }
}


// ------------------------------------------------ \\
// $NAVIGATION
// ------------------------------------------------ //
.navigation-main {
  font-family: $headings-font-family;
}
#{$site-prefix}-current {
  color: $link-d-40;
}


// ------------------------------------------------ \\
// $TYPOGRAPHY
// ------------------------------------------------ //

// Font micro size
#{$site-prefix}-font-micro {
  @include font-size($micro-font-size);
}

// Lead paragraphs
.lead {
  font-size: rfs-fluid-value(24px);
  line-height: 1.35;
  text-indent: 0;
  text-align: left !important;
  margin: $spacer*2 0;
}

// Blockquote
blockquote {
  @extend .blockquote;
  width: 80%;
  line-height: 1.3;
  margin-top: $spacer*2;
  padding-left: $spacer*1.25;
  border-left: 2px solid $background-d-10;
  p {
    display: inline;
    text-indent: 0;

    &:first-child {
      margin-bottom: $spacer;
    }
  }
}

// Blockquote cite
cite {
  display: block;
  font-style: normal;
  text-indent: 0;
  margin-top: $spacer*0.5;
}


// ------------------------------------------------ \\
// $LINKS
// ------------------------------------------------ //

// Links and hover (component as a utility class)
%smd-link,
#{$site-prefix}-link {
  @extend #{$site-prefix}-transition-txtdec-03s;
  color: $link-color;
  text-decoration-line: underline;
  text-decoration-color: $link-decoration;
  text-decoration-thickness: 4px;

  &:hover {
    color: $link-hover-color;
    text-decoration-color: $link-hover-decoration;
  }
}

// Stretched link (TwBs utility class - redefined)
.stretched-link {
  @extend %smd-link;
}


// ------------------------------------------------ \\
// $ENTRY
// ------------------------------------------------ *
// Default container for posts and pages
// ------------------------------------------------ *
// This is the only real component of the website
// Everything else should be utility-first CSS
// ------------------------------------------------ //

// Default entry font size
%smd-entry-fs,
#{$site-prefix}-entry-fs {
  font-size: rfs-fluid-value(20px);
}

#{$site-prefix}-entry {
  // entry headings
  h2, h3, h4, h5, h6, .h2, .h3, .h4, .h5, .h6 {
    color: $smd-heading-color-base;
    margin-top: $spacer * 3;
  }
  
  // Entry block paragraphs
  p {
    text-align: justify;
    hyphens: auto;

    &:not(.lead) {
      @extend %smd-entry-fs;
      line-height: 1.5;
      margin-bottom: 0;
      // First paragraph after interruption not indented
      & + p {
        text-indent: $spacer*2;
      }
    }

    // Entry block detached optional paragraph
    &.detached {
      text-indent: 0 !important;
      margin-top: $spacer*2;
    }
  }

  // Entry block link
  a:not(.btn) {
    @extend %smd-link;

    // Tag results link in search page
    &[href^="/tag/"] {
      text-transform: capitalize;
      &::before {
        content: 'Tag: ';
      }
    }
    
    // Category results link in search page
    &[href^="/category/"]::before {
      content: 'Category: ';
    }
  }

  // Italic
  em {
    @extend #{$site-prefix}-serif-italic;
    // font-family: Georgia, 'Times New Roman', Times, serif;
  }

  // Entry block ordered lists
  ol {
    list-style: none;
    counter-reset: smd-counter 0;
    width: 80%;
    margin-top: $spacer*1.5;
    padding-left: $spacer;
    
    li {
      @extend %smd-entry-fs;
      counter-increment: smd-counter;
      line-height: 1.6;
      hyphens: auto;
      padding-left: $spacer*.5;
      &::marker {
        font-family: $headings-font-family;
        content: counter(smd-counter) ".";
        color: $link-d-20;
        font-weight: bold;
      }

      ol {
        margin-top: 0;
      }
    }
  }

  // Entry block unordered lists
  ul {
    margin: $spacer*1.5 0;

    li {
      @extend %smd-entry-fs;
      line-height: 1.5;
      margin: 0;

      ul {
        margin-top: 0;
        margin-bottom: 0;
      }
    }
  }
}


// ------------------------------------------------ \\
// $PORTFOLIO
// ------------------------------------------------ //

.container-portfolio {
  @include make-container();
  width: 800px;
}
#{$site-prefix}-portfolio-quote {
  width: rfs-fluid-value(350px) !important;
}
#{$site-prefix}-portfolio-intro {
  font-size: rfs-fluid-value(16px) !important;
  text-align: left !important;
}
.layout-portfolio-content {
  h2 { @extend .display-5; }
  h3 { @extend .fs-3; }
}
.inline_toc {
  @extend .my-0;

  li {
    line-height: 2 !important;
  }
}


// ------------------------------------------------ \\
// $ACCORDION
// ------------------------------------------------ //

#{$site-prefix}-accordion {
 
  input {
    display: none;
  }

  &-box {
    position: relative;
    height: rfs-fluid-value(48px);
    border-radius: 4px;

    &::before {
      content: '';
      position: absolute;
      display: block;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      pointer-events: none;
      border-bottom: 1px solid $background-l-20;
    }

    &-title {
      width: 100%;
      height: rfs-fluid-value(48px);
      line-height: rfs-fluid-value(48px);
      padding: 0 rfs-fluid-value(20px);
      display: inline-block;
      background-color: $background-l-60;
      cursor: pointer;
      user-select: none;

      h4 {
        line-height: rfs-fluid-value(48px);
      }
    }

    &-content {
      width: 100%;
      padding: rfs-fluid-value(12px) rfs-fluid-value(24px) rfs-fluid-value(24px) rfs-fluid-value(24px);
      display: none;
      background: $white;
    }

    &-close {
      position: absolute;
      height: rfs-fluid-value(48px);
      width: 100%;
      top: 0;
      left: 0;
      cursor: pointer;
      display: none;
    }
  }
}
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title {
  background-color: $background-l-70;
  transition: background-color .3s ease-in-out;
}
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title h4 {
  color: $black;
  transition: color 1s ease-in-out;
}
input:checked + #{$site-prefix}-accordion-box {
  height: auto;
  border-bottom: 2px solid $background-l-10;
}
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-content,
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-close {
  display: inline-block;
}
#{$site-prefix}-accordion-arrows #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title {
  padding-left: rfs-fluid-value(44px);
  width: 100%;
}
#{$site-prefix}-accordion-arrows #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title:before {
  position: absolute;
  display: block;
  content: '\203a';
  font-size: rfs-fluid-value(24px);
  left: rfs-fluid-value(20px);
  top: -2px;
  color: $background-d-40;
  transition: all .2s ease-in-out;
}
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title:before {
  transform: rotate(90deg);
  color: $black;
}


// ------------------------------------------------ \\
// $BREADCRUMBS
// (TwBs utility component - redefined)
// ------------------------------------------------ //

.breadcrumb-item {
  letter-spacing: $letter-spacing-shrink;

  &:last-child {
    color: $gray-700;
  }

  a {
    @extend #{$site-prefix}-transition-txtdec-03s;
    text-decoration: solid underline $link-l-30 2px;

    &:hover {
      text-decoration-color: $link-hover-decoration;
    }
  }
}


// ------------------------------------------------ \\
// $IMAGES
// ------------------------------------------------ //

img         { max-width: 100%; height: auto; }
figure      { margin: auto; }
figcaption  { @extend .initialism; }
.comp-logos { width: 130px; height: auto; }

// Horizontal line spacer
hr {
  width: $spacer*5;
  text-align: center;
  margin: $spacer*3 auto;
  
  &:not([size]) { height: 2px; }
}


// ------------------------------------------------ \\
// $IMAGEGALLERY
// ------------------------------------------------ //

.img-slide { 
  max-height: 90vh;
}
#{$site-prefix}-img-gallery-thumbs { 
  cursor: pointer;
}
#{$site-prefix}-img-gallery-thumb {
  width: 150px;
  height: 150px;
}
#{$site-prefix}-image-gallery-caption {
  width: 150px;
}


// ------------------------------------------------ \\
// $MODAL
// ------------------------------------------------ //

#{$site-prefix}-modal-content { 
  position: relative;
}
#{$site-prefix}-modal-header { 
  position: absolute; 
  top: 0; 
  left: 0; 
  width: 100%; 
  z-index: 9000;
}


// ------------------------------------------------ \\
// $LISTS
// ------------------------------------------------ //

#{$site-prefix}-ul {
  list-style-position: outside;
  margin: $spacer 0 $spacer*1.5 0;
  padding-left: $spacer;

  li {
    margin: .7rem 0;
    &::marker {
      color: $link-d-20;
    }
  }
}


// ------------------------------------------------ \\
// $EMBEDS
// ------------------------------------------------ //

// Responsive iframe
.iframe-container {
  margin: ($spacer * 3) 0;
  padding-top: 56.25%; // 16:9 aspect ratio
  overflow: hidden;
  position: relative;

  iframe {
    border: 0;
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;
  }
}
.twitter-tweet-rendered {
  margin: $spacer*3 auto $spacer*4 auto !important;
}


// ------------------------------------------------ \\
// $TABLES
// (TwBs utility class - redefined)
// ------------------------------------------------ //

.table {
  font-size: 1.1rem;
}


// ------------------------------------------------ \\
// $FOOTER
// ------------------------------------------------ //

#{$site-prefix}-footer-wrapper {
  background: rgba($background-l-30, .2);
  flex-shrink: 0;
}


// ------------------------------------------------ \\
// $BUTTONS
// ------------------------------------------------ //

// Default button
.btn-smd {
  @extend #{$site-prefix}-transition-bg-01s;
  color: $white;
  background-color: $heading-l-10;

  &:hover {
    color: $white;
    background-color: $heading-d-20;
  }
}

// Default call-to-action
.btn-smd-cta {
  @extend #{$site-prefix}-tx-shadow;
  background-color: $link-l-60 !important;
  color: $black;
  border-bottom: 2px solid $link-l-20;

  &:hover {
    background-color: $link-d-60 !important;
    border-bottom: 2px solid transparent;
    text-shadow: none;
  }
}

// Modal close button
.btn-close {
  background-color: $black;
}


// ------------------------------------------------ \\
// $LABELS
// ------------------------------------------------ //

// Label
.btn-label-smd {
  font-size: rfs-fluid-value(11px);
  color: $link-d-70;
  padding: 0 $spacer*0.25;
}
.btn-label-lg-smd {
  font-size: rfs-fluid-value(18px);
}
// Label background
.btn-label-smd-bg {
  background-color: $smd-bg-color-base; 
}
// Label link
.btn-label-smd-link {
  @extend #{$site-prefix}-transition-bg-03s;
  &:hover {
    color: $link-l-80 !important;
    background-color: $background-d-70;
  }
}


// ------------------------------------------------ \\
// $EFFECTS
// ------------------------------------------------ //

#{$site-prefix}-mask-texture {
  -webkit-mask-image: url(/assets/images/heading-texture.png);
  mask-image: url(/assets/images/heading-texture.png);
}

// Translucent BG
// ------------------------------------------------ *
#{$site-prefix}-translucent-bg {
  background: rgba($background-l-30, .3);
}

// Text shadow
// ------------------------------------------------ *
#{$site-prefix}-tx-shadow {
  text-shadow: 0px 0px 0px #fff, 0 0 0 #000, 0px 1px 1px #fff;
}

// TRANSITIONS
// ------------------------------------------------ *
// Resulting classes to be used in HTML:
// ------------------------------------------------ *
// * smd-transition-bg-01s
// * smd-transition-bg-03s
// * smd-transition-color-01s
// * smd-transition-color-03s
// * smd-transition-txtdec-01s
// * smd-transition-txtdec-03s
// * smd-transition-border-01s
// * smd-transition-border-03s
// * smd-transition-opacity-01s
// * smd-transition-opacity-03s
// ------------------------------------------------ *
#{$site-prefix}-transition {
    // Background
    &-bg-01s:hover      { transition: background-color 0.1s ease-in !important; }
    &-bg-03s:hover      { transition: background-color 0.3s ease-in !important; }
    // Text color
    &-color-01s:hover   { transition: color 0.1s ease-in !important; }
    &-color-03s:hover   { transition: color 0.3s ease-in !important; }
    // Text-decoration
    &-txtdec-01s:hover  { transition: text-decoration-color 0.1s ease-in !important; }
    &-txtdec-03s:hover  { transition: text-decoration-color 0.3s ease-in !important; }
    // Opacity
    &-opacity-01s,
    &-opacity-03s       { opacity: 1; }
    &-opacity-01s:hover { opacity: .8; transition: opacity .1s ease-in-out !important; }
    &-opacity-03s:hover { opacity: .8; transition: opacity .3s ease-in-out !important; }
    // Borders
    &-border-01s        { border: 2px solid transparent; }
    &-border-03s        { border: 2px solid transparent; }
    &-border-01s:hover  { border: 2px solid $background-l-20; transition: border 0.1s ease-in !important; }
    &-border-03s:hover  { border: 2px solid $background-l-20; transition: border 0.3s ease-in !important; }
}

// Text rotation
// ------------------------------------------------ *
#{$site-prefix}-text-rotate {
  transform: rotate(359deg);
}

// Letter spacing
// ------------------------------------------------ *
#{$site-prefix}-letter-spacing-w1 {
  letter-spacing: $letter-spacing-wide-1;
}

// Mark (highlights)
// ------------------------------------------------ *
mark {
  &#{$site-prefix}-highlight {
    display: inline-block;
    border-radius: 1.5rem 0.5rem 1.2rem 0.7rem;
    background-image: linear-gradient(-100deg, rgba(255,224,0,0.1), rgba(255,224,0,0.5) 95%, rgba(255,224,0,0.2));
  }
}